(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1004:function(e,t,a){e.exports={drawerModal:"src-pages-formManagement-previewWorkFlow-index-module__drawerModal--yFT7X",content:"src-pages-formManagement-previewWorkFlow-index-module__content--2UPCM",row:"src-pages-formManagement-previewWorkFlow-index-module__row--X-Lj3",label:"src-pages-formManagement-previewWorkFlow-index-module__label--2bYNd",footer:"src-pages-formManagement-previewWorkFlow-index-module__footer--2Pfzs",flowContainer:"src-pages-formManagement-previewWorkFlow-index-module__flowContainer--3vOCP"}},1069:function(e,t,a){"use strict";a(939);var n=a(951),r=(a(154),a(25)),o=a(30),s=a(31),i=a(33),l=a(32),c=a(34),d=a(0),u=a.n(d),p=a(897),m=a(63),f=a(1004),h=a.n(f),w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r))))._onAfterChange=function(e){if(e.item&&"edge"===e.item.type&&"add"===e.action){var t=a.props.propsAPI;setTimeout(function(){t.executeCommand("undo")})}},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement(p.a,{className:h.a.flowContainer,data:this.props.flowData,onClick:this.props._onClick,onAfterChange:this._onAfterChange,graph:{edgeDefaultShape:"flow-polyline"}})}}]),t}(d.Component),v=Object(p.e)(w),b=(a(124),a(42)),y=(a(740),a(743)),g=(a(709),a(639)),E=(a(295),a(125)),D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={nodeName:"",userType:"1",selectItems:[],selectKeys:[],auditType:"1",nodeDetails:[]},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.nodeDetails.find(function(t){return t.id===e.props.currentNode.model.id})||{};console.log(t),"{}"===JSON.stringify(t)?this.setState({nodeDetails:this.props.nodeDetails,selectItems:[],selectKeys:[],nodeName:this.props.currentNode.model.label,userType:"1",auditType:"1",nodeId:this.props.currentNode.model.id}):this.setState({nodeDetails:this.props.nodeDetails,selectItems:t.selectUsers||[],selectKeys:Array.isArray(t.selectUsers)?t.selectUsers.map(function(e){return e.participantId}):[],nodeName:t.nodeName,userType:t.userType,auditType:t.auditType,nodeId:this.props.currentNode.model.id})}},{key:"render",value:function(){var e=this;return console.log(this.state.auditType),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:h.a.content},u.a.createElement("div",{className:h.a.row},u.a.createElement("div",{className:h.a.label},u.a.createElement("i",null,"*"),"\u8282\u70b9\u540d\u79f0\uff1a"),u.a.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u8282\u70b9\u540d\u79f0",style:{width:"240px"},value:this.state.nodeName,disabled:!0})),u.a.createElement("div",{className:h.a.row},u.a.createElement("div",{className:h.a.label},"\u8bbe\u7f6e\u5ba1\u6279\u4eba\uff1a"),u.a.createElement(g.a.Group,{value:this.state.userType,style:{lineHeight:"32px"},disabled:!0},u.a.createElement(g.a,{value:"1"},"\u6307\u5b9a\u4eba\u5458"),u.a.createElement(g.a,{value:"2"},"\u89d2\u8272"))),u.a.createElement("div",{className:h.a.row},this.state.selectItems.map(function(e){return u.a.createElement(y.a,{key:e.participantId,color:"blue"},e.participantName)})),u.a.createElement("div",{style:{background:"#E8EBEE",height:1,margin:"16px 0"}}),u.a.createElement("div",{className:h.a.row},u.a.createElement("p",null,"\u591a\u4eba\u5ba1\u6838\u65f6\u91c7\u7528\u7684\u5ba1\u6838\u65b9\u5f0f"),u.a.createElement(g.a.Group,{value:this.state.auditType,disabled:!0},u.a.createElement(g.a,{value:"2"},"\u4f1a\u7b7e\uff08\u987b\u6240\u6709\u5ba1\u6838\u4eba\u540c\u610f\uff09"),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(g.a,{value:"1"},"\u6216\u7b7e\uff08\u4e00\u540d\u5ba1\u6838\u4eba\u540c\u610f\u6216\u62d2\u7edd\u5373\u53ef\uff09")))),u.a.createElement("div",{className:h.a.footer},u.a.createElement(b.a,{onClick:function(){e.props.onCloseDrawer()}},"\u5173 \u95ed")))}}]),t}(d.Component);a.d(t,"a",function(){return O});var O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).getFlowDataById=function(e){e&&Object(m.a)("/ybt/wf/process/queryProcessById?processId=".concat(e)).then(function(e){if(e.success){var t=JSON.parse(e.obj);a.setState({flowData:{nodes:t.nodeList,edges:t.edgeList},nodeDetails:t.nodeDetails})}else r.a.error("\u83b7\u53d6\u6570\u636e\u51fa\u9519")})},a._onClick=function(e){if(!e.item)return!1;var t=e.item.getModel();-1!==["n001","n002","n003","n004","e001","e002"].indexOf(t.judgeId)?console.log("\u5185\u7f6e\u8282\u70b9\u4e0d\u53ef\u64cd\u4f5c---\u70b9\u51fb"):"node"===e.item.type&&a.setState({showDrawer:!0,currentNode:e.item})},a.onCloseDrawer=function(){a.setState({showDrawer:!1})},a.state={showDrawer:!1,flowData:{nodes:[],edges:[]},nodeDetails:[],currentNode:{}},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.processId&&this.getFlowDataById(this.props.processId)}},{key:"componentDidUpdate",value:function(e){e.processId!==this.props.processId&&this.getFlowDataById(this.props.processId)}},{key:"render",value:function(){return u.a.createElement(p.d,{style:{padding:"20px",height:"100%"}},u.a.createElement(v,{flowData:this.state.flowData,_onClick:this._onClick}),u.a.createElement(n.a,{className:h.a.drawerModal,title:"\u8282\u70b9\u5c5e\u6027",width:380,placement:"right",closable:!1,onClose:this.onCloseDrawer,visible:this.state.showDrawer,destroyOnClose:!0},u.a.createElement(D,{nodeDetails:this.state.nodeDetails,onCloseDrawer:this.onCloseDrawer,currentNode:this.state.currentNode})))}}]),t}(d.Component)},1232:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return p});var n=a(30),r=a(31),o=a(33),s=a(32),i=a(34),l=a(0),c=a.n(l),d=a(1069),u=a(949),p=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=Object(u.a)().id;return c.a.createElement(d.a,{processId:e})}}]),t}(l.Component)},949:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(){var e=window.location.href,t="",a={};if(e.indexOf("?")>-1){t=e.indexOf("?")+1;var n=e.substr(t).split("&");n&&n.length>0&&n.forEach(function(e){var t=e.split("=");a[t[0]]=t[1]})}return a}}}]);
//# sourceMappingURL=49.3d81d07e.chunk.js.map